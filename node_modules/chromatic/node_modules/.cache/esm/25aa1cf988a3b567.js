let HttpsProxyAgent,noProxy,URL;_88a‍.x([["default",()=>_88a‍.o]]);_88a‍.w("https-proxy-agent",[["default",["HttpsProxyAgent"],function(v){HttpsProxyAgent=v}]]);_88a‍.w("no-proxy",[["default",["noProxy"],function(v){noProxy=v}]]);_88a‍.w("url",[["URL",["URL"],function(v){URL=v}]]);



const agents = {};

const getProxyAgent = ({ env, log }, url, options = {}) => {
  const proxy = env.HTTPS_PROXY || env.HTTP_PROXY;
  if (!proxy || noProxy(url)) return undefined;

  log.debug({ url, proxy, options }, 'Using proxy agent');
  const requestHost = new URL(url).host;
  if (!agents[requestHost]) {
    const { hostname, port, protocol } = new URL(proxy);
    agents[requestHost] = new HttpsProxyAgent({ hostname, port, protocol, ...options });
  }
  return agents[requestHost];
};

_88a‍.d(getProxyAgent);
